"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[481],{2481:(wt,F,d)=>{d.r(F),d.d(F,{MemberAdminAddPageComponent:()=>G,MemberAdminUpdatePageComponent:()=>V,MemberManagementPageComponent:()=>$,ProductAdminAddPageComponent:()=>pt,ProductAdminUpdatePageComponent:()=>ft,ProductManagementPageComponent:()=>k,ShelveManagementPageComponent:()=>E,StockAdminAddPageComponent:()=>ut,StockAdminDetailPageComponent:()=>vt,StockAdminUpdatePageComponent:()=>Ct});var C=d(1635),t=d(4438),_=d(6970),M=d(1238),r=d(3834),A=d(7461),u=d(4842);class ${constructor(){this.router=(0,t.WQX)(_.Ix),this.securityService=(0,t.WQX)(M.iJ),this.credentialUtils=(0,t.WQX)(M.hL),this.config$=(0,t.EWP)(()=>this.genConfigs(this.securityService.list$()))}ngOnInit(){this.securityService.list()}addItem(){this.router.navigate([r.Sb.ADMIN_MEMBER_CREATE]).then()}onActionClicked(n){const e=n.data;switch(n.action){case A.lm.DETAIL:this.handleDetail();break;case A.lm.EDIT:this.handleEdit(e.id);break;case A.lm.DELETE:this.handleDelete(e.id)}}onRowClicked(n){console.log("onRowClicked",n)}genConfigs(n){return this.credentialUtils.getDataTableConfig(n,!0)}handleDetail(){console.log("show detail")}handleEdit(n){this.router.navigate([r.Sb.ADMIN_MEMBER_UPDATE.replace(":id",n)]).then()}handleDelete(n){this.securityService.delete(n)}static#t=this.\u0275fac=function(e){return new(e||$)};static#e=this.\u0275cmp=t.VBU({type:$,selectors:[["app-member-management-page"]],standalone:!0,features:[t.aNF],decls:6,vars:4,consts:[[1,"actions"],[1,"btn",3,"click"],[1,"fa-solid","fa-plus"],[3,"actionClicked","rowClicked","config"]],template:function(e,i){1&e&&(t.j41(0,"div",0)(1,"div",1),t.bIt("click",function(){return i.addItem()}),t.nrm(2,"i",2),t.EFF(3),t.nI1(4,"translate"),t.k0s()(),t.j41(5,"app-data-table",3),t.bIt("actionClicked",function(s){return i.onActionClicked(s)})("rowClicked",function(s){return i.onRowClicked(s)}),t.k0s()),2&e&&(t.R7$(3),t.SpI(" ",t.bMT(4,2,"app.common.add-member"),""),t.R7$(2),t.Y8G("config",i.config$()))},dependencies:[r.up,u.h,u.D9],styles:[".actions[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:flex-end;align-items:flex-end;margin-bottom:20px}.actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{height:40px;display:flex;flex-direction:row;gap:8px;align-items:center;justify-content:center;padding:8px 16px;background:var(--theme-primary);color:var(--theme-white);border-radius:2px;cursor:pointer;transition:all ease .3s}.actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background:var(--theme-secondary);color:var(--theme-primary)}"]})}(0,C.Cg)([(0,r.ZD)({title:"admin-feature-member-delete.confirm-title",message:"admin-feature-member-delete.confirm-message"})],$.prototype,"handleDelete",null);let G=(()=>{class o{constructor(){this.securityService=(0,t.WQX)(M.iJ),this.credentialUtils=(0,t.WQX)(M.hL),this.router=(0,t.WQX)(_.Ix),this.config$=(0,t.EWP)(()=>this.genFormConfigs(this.securityService.list$()))}ngOnInit(){this.securityService.list()}genFormConfigs(e){let i=this.credentialUtils.getEmpty();return this.credentialUtils.getDataFormConfig(i,"feature.admin.member.title-add")}cancel(){this.router.navigate([r.Sb.ADMIN_MEMBER]).then()}onFormSubmitted(e){this.securityService.create(this.credentialUtils.genCreatePayload({...e})).subscribe()}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-member-admin-add-page"]],standalone:!0,features:[t.aNF],decls:2,vars:2,consts:[[3,"title"],[3,"cancel","formSubmitted","config"]],template:function(i,l){1&i&&(t.j41(0,"app-card",0)(1,"app-form-builder",1),t.bIt("cancel",function(){return l.cancel()})("formSubmitted",function(m){return l.onFormSubmitted(m)}),t.k0s()()),2&i&&(t.Y8G("title","feature.admin.member.title-add"),t.R7$(),t.Y8G("config",l.config$()))},dependencies:[r.$l,r.ib]})}return o})();var v=d(8141);function j(o,n){if(1&o){const e=t.RV6();t.j41(0,"app-form-builder",2),t.bIt("cancel",function(){t.eBV(e);const l=t.XpG();return t.Njj(l.cancel())})("formSubmitted",function(l){t.eBV(e);const s=t.XpG();return t.Njj(s.onFormSubmitted(l))}),t.k0s()}if(2&o){const e=t.XpG();t.Y8G("config",e.config$())}}let V=(()=>{class o{constructor(){this.credentialUtils=(0,t.WQX)(M.hL),this.securityService=(0,t.WQX)(M.iJ),this.router=(0,t.WQX)(_.Ix),this.config$=(0,t.EWP)(()=>this.genFormConfigs(this.detail$())),this.detail$=(0,t.vPA)(null)}ngOnInit(){this.securityService.detail(this.id).pipe((0,v.M)(e=>this.detail$.set(e))).subscribe(),this.securityService.detail(this.id).pipe((0,v.M)(e=>console.log(e))).subscribe()}cancel(){this.router.navigate([r.Sb.ADMIN_MEMBER]).then()}genFormConfigs(e){const i=e??this.credentialUtils.getEmpty();return this.credentialUtils.getDataFormConfig(i,"feature.admin.member.title-update")}onFormSubmitted(e){this.securityService.update(this.credentialUtils.genUpdatePayload({id:this.detail$().id,...e})).subscribe()}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-member-admin-update-page"]],inputs:{id:"id"},standalone:!0,features:[t.aNF],decls:2,vars:2,consts:[[3,"title"],[3,"config"],[3,"cancel","formSubmitted","config"]],template:function(i,l){1&i&&(t.j41(0,"app-card",0),t.DNE(1,j,1,1,"app-form-builder",1),t.k0s()),2&i&&(t.Y8G("title","feature.admin.member.title-update"),t.R7$(),t.vxM(1,l.detail$()?1:-1))},dependencies:[r.$l,r.ib]})}return o})();var T=d(660),P=d(6714);class k{constructor(){this.router=(0,t.WQX)(_.Ix),this.productService=(0,t.WQX)(P.b),this.productUtils=(0,t.WQX)(P.u),this.config$=(0,t.EWP)(()=>this.genConfigs(this.productService.list$()))}ngOnInit(){this.productService.list()}addItem(){this.router.navigate([r.Sb.ADMIN_PRODUCT_CREATE]).then()}onActionClicked(n){const e=n.data;switch(n.action){case T.Qq.EDIT:this.handleEdit(e.id);break;case T.Qq.DELETE:this.handleDelete(e.id)}}onRowClicked(n){console.log("onRowClicked",n)}genConfigs(n){return this.productUtils.getDataTableConfig(n,!0)}handleDetail(){console.log("show detail")}handleEdit(n){this.router.navigate([r.Sb.ADMIN_PRODUCT_UPDATE.replace(":id",n)]).then()}handleDelete(n){this.productService.delete(n)}static#t=this.\u0275fac=function(e){return new(e||k)};static#e=this.\u0275cmp=t.VBU({type:k,selectors:[["app-product-management-page"]],standalone:!0,features:[t.aNF],decls:6,vars:4,consts:[[1,"actions"],[1,"btn",3,"click"],[1,"fa-solid","fa-plus"],[3,"actionClicked","rowClicked","config"]],template:function(e,i){1&e&&(t.j41(0,"div",0)(1,"div",1),t.bIt("click",function(){return i.addItem()}),t.nrm(2,"i",2),t.EFF(3),t.nI1(4,"translate"),t.k0s()(),t.j41(5,"app-data-table",3),t.bIt("actionClicked",function(s){return i.onActionClicked(s)})("rowClicked",function(s){return i.onRowClicked(s)}),t.k0s()),2&e&&(t.R7$(3),t.SpI(" ",t.bMT(4,2,"app.common.add-element"),""),t.R7$(2),t.Y8G("config",i.config$()))},dependencies:[r.up,u.h,u.D9],styles:[".actions[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:flex-end;align-items:flex-end;margin-bottom:20px}.actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{height:40px;display:flex;flex-direction:row;gap:8px;align-items:center;justify-content:center;padding:8px 16px;background:var(--theme-primary);color:var(--theme-white);border-radius:2px;cursor:pointer;transition:all ease .3s}.actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background:var(--theme-secondary);color:var(--theme-primary)}"]})}(0,C.Cg)([(0,r.ZD)({title:"admin-feature-product-delete.confirm-title",message:"admin-feature-product-delete.confirm-message"})],k.prototype,"handleDelete",null);var c=d(9417),a=d(8758),U=d(6748),L=d(9252);const N=["table"],W=["cell"],X=["wallV"],B=["wallH"],R=(o,n)=>n.input,O=(o,n)=>n.index;function H(o,n){if(1&o&&(t.j41(0,"p"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&o){const e=n.$implicit,i=t.XpG(2);t.R7$(),t.JRh(t.bMT(2,1,i.translateKey+"error."+e.control+"."+e.error))}}function Q(o,n){if(1&o&&(t.j41(0,"span",11),t.EFF(1),t.nI1(2,"translate"),t.k0s(),t.j41(3,"span",12),t.Z7z(4,H,3,3,"p",null,t.Vm6),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.JRh(t.bMT(2,1,"admin-feature-shelve-add.error-title")),t.R7$(3),t.Dyx(e.errors$())}}function Z(o,n){1&o&&(t.j41(0,"span",13),t.EFF(1),t.nI1(2,"translate"),t.k0s(),t.j41(3,"span",14),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"span",14),t.EFF(7),t.nI1(8,"translate"),t.k0s(),t.j41(9,"span",14),t.EFF(10),t.nI1(11,"translate"),t.k0s()),2&o&&(t.R7$(),t.JRh(t.bMT(2,4,"admin-feature-shelve-add.explanation-title")),t.R7$(3),t.JRh(t.bMT(5,6,"admin-feature-shelve-add.explanation")),t.R7$(3),t.JRh(t.bMT(8,8,"admin-feature-shelve-add.explanation-2")),t.R7$(3),t.JRh(t.bMT(11,10,"admin-feature-shelve-add.explanation-3")))}function Y(o,n){if(1&o&&(t.j41(0,"div",9)(1,"label"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.nrm(4,"input",15),t.nI1(5,"translate"),t.k0s()),2&o){const e=n.$implicit,i=t.XpG();t.R7$(2),t.JRh(t.bMT(3,4,i.translateKey+e.input)),t.R7$(2),t.Y8G("formControl",e.formControl)("placeholder",t.bMT(5,6,e.placeholder))("readOnly",i.shelveAreas$().length>0||e.readonly)}}function J(o,n){if(1&o){const e=t.RV6();t.j41(0,"div",10)(1,"button",16),t.bIt("click",function(){t.eBV(e);const l=t.XpG();return t.Njj(l.generateSurface())}),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"button",16),t.bIt("click",function(){t.eBV(e);const l=t.XpG();return t.Njj(l.addDoor())}),t.EFF(5),t.nI1(6,"translate"),t.k0s()()}if(2&o){const e=t.XpG();t.R7$(),t.AVh("disabled",e.formGroup.invalid),t.Y8G("disabled",e.formGroup.invalid),t.R7$(),t.SpI("",t.bMT(3,8,"admin-feature-shelve-add.generate")," "),t.R7$(2),t.AVh("disabled",e.formGroup.invalid||0===e.data$().nbRows),t.Y8G("disabled",e.formGroup.invalid),t.R7$(),t.SpI("",t.bMT(6,10,e.wallEditionMode$()?"admin-feature-shelve-add.add-doors-validate":"admin-feature-shelve-add.add-doors")," ")}}function z(o,n){if(1&o&&t.nrm(0,"div",30),2&o){const e=n.$implicit,i=t.XpG(2);t.Aen(e.style),t.AVh("door-vertical",e.type===i.StockDoorType.VERTICAL)("door-horizontal",e.type===i.StockDoorType.HORIZONTAL)}}function K(o,n){if(1&o){const e=t.RV6();t.j41(0,"div",31,1),t.bIt("click",function(){const l=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.setWallSelection(l))}),t.k0s()}2&o&&t.AVh("wall-selected",n.$implicit.selected)}function q(o,n){if(1&o){const e=t.RV6();t.j41(0,"div",31,2),t.bIt("click",function(){const l=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.setWallSelection(l))}),t.k0s()}2&o&&t.AVh("wall-selected",n.$implicit.selected)}function tt(o,n){if(1&o){const e=t.RV6();t.j41(0,"div",31),t.bIt("click",function(){const l=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.setWallSelection(l))}),t.k0s()}2&o&&t.AVh("wall-selected",n.$implicit.selected)}function et(o,n){if(1&o){const e=t.RV6();t.j41(0,"div",31),t.bIt("click",function(){const l=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.setWallSelection(l))}),t.k0s()}2&o&&t.AVh("wall-selected",n.$implicit.selected)}function nt(o,n){if(1&o&&(t.j41(0,"div",32),t.EFF(1),t.k0s()),2&o){const e=n.$implicit;t.Aen("background-color:"+e.background+";color:"+e.color+";top:"+e.top+";left:"+e.left+";width:"+e.width+";height:"+e.height+";"),t.R7$(),t.SpI(" ",e.rack," ")}}function it(o,n){if(1&o){const e=t.RV6();t.j41(0,"div",34,3),t.bIt("click",function(){const l=t.eBV(e).$implicit,s=t.XpG(3);return t.Njj(s.cellClick(l))}),t.k0s()}if(2&o){const e=n.$implicit;t.AVh("selected",e.selected),t.Y8G("id",e.rowIndex+"-"+e.index)}}function ot(o,n){if(1&o&&(t.j41(0,"div",28),t.Z7z(1,it,2,3,"div",33,O),t.k0s()),2&o){const e=n.$implicit;t.R7$(),t.Dyx(e.cells)}}function at(o,n){if(1&o&&(t.j41(0,"div",9)(1,"label"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.nrm(4,"input",39),t.nI1(5,"translate"),t.k0s()),2&o){const e=n.$implicit,i=t.XpG(3);t.R7$(2),t.JRh(t.bMT(3,5,i.translateKey+e.input)),t.R7$(2),t.Y8G("type",e.inputType)("formControl",e.formControl)("placeholder",t.bMT(5,7,e.placeholder))("readOnly",e.readonly)}}function lt(o,n){1&o&&(t.j41(0,"div",37),t.nrm(1,"i",40),t.j41(2,"span"),t.EFF(3),t.nI1(4,"translate"),t.k0s()()),2&o&&(t.R7$(3),t.JRh(t.bMT(4,1,"admin-feature-shelve-add.add-item-help")))}function st(o,n){if(1&o){const e=t.RV6();t.j41(0,"app-card",29)(1,"div",35),t.Z7z(2,at,6,9,"div",9,R),t.k0s(),t.j41(4,"div",36),t.DNE(5,lt,5,3,"div",37),t.j41(6,"button",16),t.bIt("click",function(){t.eBV(e);const l=t.XpG(2);return t.Njj(l.validate())}),t.EFF(7),t.nI1(8,"translate"),t.k0s(),t.j41(9,"button",38),t.bIt("click",function(){t.eBV(e);const l=t.XpG(2);return t.Njj(l.goEditionMode(!1))}),t.EFF(10),t.nI1(11,"translate"),t.k0s()()()}if(2&o){const e=t.XpG(2);t.Y8G("title","admin-feature-shelve-add.add-item-title"),t.R7$(),t.Y8G("formGroup",e.shelveFormGroup),t.R7$(),t.Dyx(e.shelveFormConfig),t.R7$(3),t.vxM(5,-1===e.surfaceCoordinate$().minimalCell?5:-1),t.R7$(),t.AVh("disabled",e.shelveFormGroup.invalid||-1===e.surfaceCoordinate$().minimalCell),t.Y8G("disabled",e.shelveFormGroup.invalid||-1===e.surfaceCoordinate$().minimalCell),t.R7$(),t.SpI(" ",t.bMT(8,8,"app.common.validate")," "),t.R7$(3),t.SpI("",t.bMT(11,10,"app.common.cancel")," ")}}function rt(o,n){if(1&o){const e=t.RV6();t.j41(0,"app-card"),t.nrm(1,"app-data-table",41),t.j41(2,"div",36)(3,"button",42),t.bIt("click",function(){t.eBV(e);const l=t.XpG(2);return t.Njj(l.goEditionMode(!0))}),t.nrm(4,"i",43),t.EFF(5),t.nI1(6,"translate"),t.k0s()()()}if(2&o){const e=t.XpG(2);t.R7$(),t.Y8G("config",e.shelveDataTableConfig$()),t.R7$(4),t.SpI(" ",t.bMT(6,2,"app.common.add-element")," ")}}function ct(o,n){if(1&o){const e=t.RV6();t.j41(0,"app-card",17)(1,"div",18),t.bIt("resize",function(){t.eBV(e);const l=t.XpG();return t.Njj(l.onResize())},!1,t.tSv),t.Z7z(2,z,1,6,"div",19,t.Vm6),t.j41(4,"div",20),t.nrm(5,"div",21),t.Z7z(6,K,2,2,"div",22,O),t.nrm(8,"div",21),t.k0s(),t.j41(9,"div",23),t.Z7z(10,q,2,2,"div",22,t.Vm6),t.k0s(),t.j41(12,"div",24),t.Z7z(13,tt,1,2,"div",22,t.Vm6),t.k0s(),t.j41(15,"div",25),t.nrm(16,"div",21),t.Z7z(17,et,1,2,"div",22,t.Vm6),t.nrm(19,"div",21),t.k0s(),t.j41(20,"div",26,0),t.Z7z(22,nt,2,3,"div",27,t.Vm6),t.Z7z(24,ot,3,0,"div",28,O),t.k0s()()(),t.DNE(26,st,12,12,"app-card",29)(27,rt,7,4)}if(2&o){const e=t.XpG();t.Y8G("isTransparent",!0)("actions",e.actions$().plan),t.R7$(2),t.Dyx(e.doors$()),t.R7$(2),t.AVh("wall-edition-mode",e.wallEditionMode$()),t.R7$(2),t.Dyx(e.data$().wallLeftItems),t.R7$(3),t.AVh("wall-edition-mode",e.wallEditionMode$()),t.R7$(),t.Dyx(e.data$().wallTopItems),t.R7$(2),t.AVh("wall-edition-mode",e.wallEditionMode$()),t.R7$(),t.Dyx(e.data$().wallBottomItems),t.R7$(2),t.AVh("wall-edition-mode",e.wallEditionMode$()),t.R7$(2),t.Dyx(e.data$().wallRightItems),t.R7$(3),t.AVh("edition-mode",e.editionMode$()),t.R7$(2),t.Dyx(e.shelveAreas$()),t.R7$(2),t.Dyx(e.data$().rows),t.R7$(2),t.vxM(26,e.editionMode$()?26:27)}}var g=function(o){return o.SAVE="SAVE",o.CANCEL="CANCEL",o.DELETE="DELETE",o.ADD_SHELVE="ADD_SHELVE",o.CANCEL_ADD_SHELVE="CANCEL_ADD_SHELVE",o}(g||{});class b{constructor(){this.router=(0,t.WQX)(_.Ix),this.widthCell=0,this.shelveUtils=(0,t.WQX)(a.O9),this.stockUtils=(0,t.WQX)(a.FW),this.stockService=(0,t.WQX)(a.QJ),this.shelveFormConfig=[],this.data$=(0,t.vPA)({wallTopItems:[],wallLeftItems:[],wallRightItems:[],wallBottomItems:[],nbRows:0,nbCells:0,rows:[]}),this.errors$=(0,t.vPA)([]),this.shelveErrors$=(0,t.vPA)([]),this.editionMode$=(0,t.vPA)(!1),this.wallEditionMode$=(0,t.vPA)(!1),this.shelveAreas$=(0,t.vPA)(this.stock?.shelves??[]),this.actions$=(0,t.EWP)(()=>this.getActions(this.shelveAreas$())),this.doors$=(0,t.vPA)(this.stock?.doors??[]),this.surfaceCoordinate$=(0,t.vPA)({maximalRow:-1,minimalRow:-1,minimalCell:-1,maximalCell:-1}),this.shelveDataTableConfig$=(0,t.EWP)(()=>this.shelveUtils.getAdminDataTableConfig(this.shelveAreas$())),this.formConfigs=[],this.destroyRef=(0,t.WQX)(t.abz),this.translateKey="admin-feature-shelve.table.label.",this.StockDoorType=a.jF,this.StockDoorPosition=a.iB}ngOnInit(){this.initFormGroup(),this.initShelveCreateFormGroup()}ngAfterViewInit(){this.onResize()}cancel(){this.router.navigate([r.Sb.SHELVE_LIST]).then()}delete(){this.stockService.delete(this.stock.id)}save(){let n;n=this.stock.isEmpty?this.stockService.create(this.stockUtils.genCreatePayload({...this.formGroup.value,shelves:this.shelveAreas$(),doors:this.doors$()})):this.stockService.update(this.stockUtils.genUpdatePayload({...this.stock,...this.formGroup.value,shelves:this.shelveAreas$()})),n.pipe((0,v.M)(e=>{e.isEmpty||this.router.navigate([r.Sb.SHELVE_LIST]).then()})).subscribe()}addDoor(){this.editionMode$()||(this.wallEditionMode$()&&(this.validateDoors(),this.generateSurface()),this.wallEditionMode$.set(!this.wallEditionMode$()))}validateDoors(){const n=this.data$().wallLeftItems.concat(this.data$().wallRightItems).concat(this.data$().wallTopItems).concat(this.data$().wallBottomItems).filter(e=>e.selected);if(n.length>0){const e=n[0],i=n.map(Mt=>Mt.index),l=Math.min(...i),s=Math.max(...i),m=s-l+1,h=this.wallV.nativeElement.offsetHeight,f=this.wallH.nativeElement.offsetWidth,S=e.type===a.jF.HORIZONTAL?"-1px":l*h+(m/2+29)+"px",D=e.type===a.jF.VERTICAL?"-1px":l*f+(m/2+29)+"px";let y=e.wall===a.iB.TOP||e.type===a.jF.VERTICAL?`top:${S};`:`bottom:${S};`;y+=e.wall===a.iB.LEFT||e.type===a.jF.HORIZONTAL?`left:${D};`:`right:${D};`,y+=`width:${e.type===a.jF.HORIZONTAL?m*f+(m-1)+"px":"32px"};height:${e.type===a.jF.VERTICAL?m*h+(m-1)+"px":"32px"}`;const xt={id:"",str:"",isEmpty:!1,wall:e.wall,type:e.type,startX:l,endX:s,startY:l,endY:s?1:0,style:y};this.doors$.set(this.doors$().concat(xt))}}generateSurface(){this.formGroup.invalid||(this.data$.set({wallTopItems:this.genWallCell([...Array(Math.ceil(this.formConfigs[1].formControl.value/this.formConfigs[3].formControl.value)).keys()],a.iB.TOP,a.jF.HORIZONTAL),wallBottomItems:this.genWallCell([...Array(Math.ceil(this.formConfigs[1].formControl.value/this.formConfigs[3].formControl.value)).keys()],a.iB.BOTTOM,a.jF.HORIZONTAL),wallLeftItems:this.genWallCell([...Array(Math.ceil(this.formConfigs[2].formControl.value/this.formConfigs[3].formControl.value)).keys()],a.iB.LEFT,a.jF.VERTICAL),wallRightItems:this.genWallCell([...Array(Math.ceil(this.formConfigs[2].formControl.value/this.formConfigs[3].formControl.value)).keys()],a.iB.RIGHT,a.jF.VERTICAL),nbRows:Math.ceil(this.formConfigs[2].formControl.value/this.formConfigs[3].formControl.value),nbCells:Math.ceil(this.formConfigs[1].formControl.value/this.formConfigs[3].formControl.value),rows:[...Array(Math.ceil(this.formConfigs[2].formControl.value/this.formConfigs[3].formControl.value)).keys()].map(n=>({index:n,cells:[...Array(Math.ceil(this.formConfigs[1].formControl.value/this.formConfigs[3].formControl.value)).keys()].map(e=>({rowIndex:n,index:e,str:`${n}-${e}`,selected:!1}))}))}),this.stock.isEmpty||(this.shelveAreas$.set(this.stock.shelves),this.doors$.set(this.stock.doors.map(n=>this.doorsFactor(n))),console.log(this.stock.doors)))}doorsFactor(n){if(this.wallH?.nativeElement&&this.wallV?.nativeElement){const e=n.endX-n.startX+1,i=this.wallV.nativeElement.offsetHeight,l=this.wallH.nativeElement.offsetWidth,h=n.type===a.jF.HORIZONTAL?"-1px":n.startX*i+(e/2+29)+"px",f=n.type===a.jF.VERTICAL?"-1px":n.startX*l+(e/2+29)+"px";let p=n.wall===a.iB.TOP||n.type===a.jF.VERTICAL?`top:${h};`:`bottom:${h};`;return p+=n.wall===a.iB.LEFT||n.type===a.jF.HORIZONTAL?`left:${f};`:`right:${f};`,p+=`width:${n.type===a.jF.HORIZONTAL?e*l+(e-1)+"px":"32px"};height:${n.type===a.jF.VERTICAL?e*i+(e-1)+"px":"32px"}`,{...n,style:p}}return n}onResize(){this.cell?.nativeElement&&(this.widthCell=this.cell.nativeElement.offsetWidth,this.shelveAreas$.set(this.shelveAreas$().map(n=>{const e=document.getElementById(n.startY+"-"+n.startX);return{...n,width:e.offsetWidth*(n.endX+1-n.startX)+"px",height:e.offsetWidth*(n.endY+1-n.startY)+"px",top:e.offsetTop+"px",left:e.offsetLeft+"px"}}))),this.wallH?.nativeElement&&this.wallV?.nativeElement&&this.doors$.set(this.doors$().map(n=>{const e=n.endX-n.startX+1,i=this.wallV.nativeElement.offsetHeight,l=this.wallH.nativeElement.offsetWidth,h=n.type===a.jF.HORIZONTAL?"-1px":n.startX*i+(e/2+29)+"px",f=n.type===a.jF.VERTICAL?"-1px":n.startX*l+(e/2+29)+"px";let p=n.wall===a.iB.TOP||n.type===a.jF.VERTICAL?`top:${h};`:`bottom:${h};`;return p+=n.wall===a.iB.LEFT||n.type===a.jF.HORIZONTAL?`left:${f};`:`right:${f};`,p+=`width:${n.type===a.jF.HORIZONTAL?e*l+(e-1)+"px":"32px"};height:${n.type===a.jF.VERTICAL?e*i+(e-1)+"px":"32px"}`,{...n,style:p}}))}setWallSelection(n){if(this.wallEditionMode$())switch(n.wall){case a.iB.TOP:this.data$.set({...this.data$(),wallTopItems:this.data$().wallTopItems.map((e,i)=>i===n.index?{...e,selected:!e.selected}:{...e})});break;case a.iB.LEFT:this.data$.set({...this.data$(),wallLeftItems:this.data$().wallLeftItems.map((e,i)=>i===n.index?{...e,selected:!e.selected}:{...e})});break;case a.iB.RIGHT:this.data$.set({...this.data$(),wallRightItems:this.data$().wallRightItems.map((e,i)=>i===n.index?{...e,selected:!e.selected}:{...e})});break;case a.iB.BOTTOM:this.data$.set({...this.data$(),wallBottomItems:this.data$().wallBottomItems.map((e,i)=>i===n.index?{...e,selected:!e.selected}:{...e})})}}goEditionMode(n){this.wallEditionMode$()||(this.editionMode$.set(n),n||this.resetForm())}actionCardClicked(n){switch(n.action){case g.SAVE:this.save();break;case g.CANCEL:this.cancel();break;case g.DELETE:this.delete()}}validate(){const n=this.surfaceCoordinate$(),e=document.getElementById(n.minimalRow+"-"+n.minimalCell),i=(0,L.Z0)();let l=Array(parseInt(this.shelveFormGroup.get(a.hE.FLOOR).value,10)).fill(0).map((s,m)=>({floor:(m+1).toString(),locationReference:i,nbItemsMax:0,id:"",isEmpty:!1,location:"",products:[],rack:this.shelveFormGroup.get(a.hE.RACK).value,section:U.wn.WOOD,str:this.shelveFormGroup.get(a.hE.RACK).value,background:this.shelveFormGroup.get(a.hE.BACKGROUND_COLOR).value,color:this.invertHex(this.shelveFormGroup.get(a.hE.BACKGROUND_COLOR).value.replace("#","")),startX:n.minimalCell,startY:n.minimalRow,endX:n.maximalCell,endY:n.maximalRow,width:e.offsetWidth*(n.maximalCell+1-n.minimalCell)+"px",height:e.offsetHeight*(n.maximalRow+1-n.minimalRow)+"px",top:e.offsetTop+"px",left:e.offsetLeft+"px",productName:"",productQuantity:""}));this.shelveAreas$.set(this.shelveAreas$().concat(l)),this.goEditionMode(!1)}cellClick(n){if(this.editionMode$()){this.widthCell=this.cell.nativeElement.clientWidth;const e=this.formGroup.get("scale").value,i=this.data$(),l=e*e/1e4,s=this.defineNewSurfaceCoordinate(n);this.data$.set({...i,rows:i.rows.map(f=>({...f,cells:f.cells.map(p=>({...p,selected:p.rowIndex>=s.minimalRow&&p.rowIndex<=s.maximalRow&&p.index>=s.minimalCell&&p.index<=s.maximalCell}))}))});const m=s.maximalRow-s.minimalRow+1,h=s.maximalCell-s.minimalCell+1;this.shelveFormGroup.get(a.hE.WIDTH).patchValue(h*e),this.shelveFormGroup.get(a.hE.HEIGHT).patchValue(m*e),this.shelveFormGroup.get(a.hE.SURFACE).patchValue(m*h*l)}}resetForm(){this.surfaceCoordinate$.set({maximalRow:-1,minimalRow:-1,minimalCell:-1,maximalCell:-1}),this.shelveFormGroup.reset(),this.shelveFormGroup.get(a.hE.BACKGROUND_COLOR).patchValue("#f5f5f7");const n=this.data$();this.data$.set({...n,rows:n.rows.map(e=>({...e,cells:e.cells.map(i=>({...i,selected:!1}))}))})}defineNewSurfaceCoordinate(n){const e=this.surfaceCoordinate$();let i;return i=-1===e.minimalCell?{maximalRow:n.rowIndex,minimalRow:n.rowIndex,minimalCell:n.index,maximalCell:n.index}:{maximalRow:n.rowIndex>=e.minimalRow?n.rowIndex:e.maximalRow,minimalRow:n.rowIndex<e.minimalRow?n.rowIndex:e.minimalRow,minimalCell:n.index<e.minimalCell?n.index:e.minimalCell,maximalCell:n.index>=e.minimalCell?n.index:e.maximalCell},this.surfaceCoordinate$.set(i),i}initFormGroup(){this.formGroup=new c.gE({[a.WU.TITLE]:new c.MJ(this.stock.title,[c.k0.required]),[a.WU.WIDTH]:new c.MJ(this.stock.width,[(0,r.Nh)()]),[a.WU.HEIGHT]:new c.MJ(this.stock.height,[(0,r.Nh)()]),[a.WU.SCALE]:new c.MJ(this.stock.scale,[(0,r.Nh)()])}),this.formConfigs=[a.WU.TITLE,a.WU.WIDTH,a.WU.HEIGHT,a.WU.SCALE].map(n=>({label:n,formControl:this.formGroup.get(n),input:n,inputType:r.NZ.TEXT,placeholder:`${this.translateKey}placeholder.${n}`,readonly:n!==a.WU.TITLE&&!this.stock.isEmpty})),this.stock.isEmpty||this.generateSurface(),(0,r.NC)(this.formGroup,this.errors$,this.destroyRef)}initShelveCreateFormGroup(){this.shelveFormGroup=new c.gE({[a.hE.RACK]:new c.MJ("",[c.k0.required]),[a.hE.FLOOR]:new c.MJ("",[c.k0.required,(0,r.Nh)()]),[a.hE.WIDTH]:new c.MJ("",[(0,r.Nh)()]),[a.hE.HEIGHT]:new c.MJ("",[(0,r.Nh)()]),[a.hE.SURFACE]:new c.MJ("",[(0,r.Nh)()]),[a.hE.BACKGROUND_COLOR]:new c.MJ("#f5f5f7",[c.k0.required])}),this.shelveFormConfig=[a.hE.RACK,a.hE.FLOOR,a.hE.WIDTH,a.hE.HEIGHT,a.hE.SURFACE,a.hE.BACKGROUND_COLOR].map((n,e)=>({label:n,formControl:this.shelveFormGroup.get(n),input:n,inputType:n===a.hE.BACKGROUND_COLOR?r.NZ.COLOR:r.NZ.TEXT,placeholder:`${this.translateKey}placeholder.${n}`,readonly:e>1})),(0,r.NC)(this.formGroup,this.shelveErrors$,this.destroyRef)}invertHex(n){return(16777215^+`0x1${n}`).toString(16).substr(1).toUpperCase()}genWallCell(n,e,i){return n.map((l,s)=>({index:s,type:i,str:l.toString(),selected:!1,wall:e}))}getActions(n){return!this.stock||this.stock.isEmpty?{physical:[{icon:"fa-regular fa-floppy-disk",action:g.SAVE,isDisabled:!1},{icon:"fa-regular fa-arrow-rotate-left",action:g.CANCEL,isDisabled:!1}],plan:[]}:{physical:[{icon:"fa-regular fa-floppy-disk",action:g.SAVE,isDisabled:!1},{icon:"fa-regular fa-arrow-rotate-left",action:g.CANCEL,isDisabled:!1},{icon:"fa-regular fa-trash",action:g.DELETE,isDisabled:!1}],plan:[]}}static#t=this.\u0275fac=function(e){return new(e||b)};static#e=this.\u0275cmp=t.VBU({type:b,selectors:[["app-shelve-admin-form"]],viewQuery:function(e,i){if(1&e&&(t.GBs(N,5),t.GBs(W,5),t.GBs(X,5),t.GBs(B,5)),2&e){let l;t.mGM(l=t.lsd())&&(i.table=l.first),t.mGM(l=t.lsd())&&(i.cell=l.first),t.mGM(l=t.lsd())&&(i.wallV=l.first),t.mGM(l=t.lsd())&&(i.wallH=l.first)}},inputs:{stock:"stock"},standalone:!0,features:[t.aNF],decls:11,vars:6,consts:[["table",""],["wallV",""],["wallH",""],["cell",""],[1,"flexos"],[3,"actionClicked","title","actions"],[1,"data"],[1,"first-step",3,"formGroup"],[1,"form"],[1,"input"],[1,"actions"],[1,"title","error"],[1,"content","error"],[1,"title"],[1,"content"],["type","text",3,"formControl","placeholder","readOnly"],[3,"click","disabled"],[3,"isTransparent","actions"],[1,"plan",3,"resize"],[1,"door",3,"door-vertical","door-horizontal","style"],[1,"left-wall"],[1,"cell-wall-square"],[1,"cell-wall",3,"wall-selected"],[1,"top-wall"],[1,"bottom-wall"],[1,"right-wall"],[1,"table"],[1,"rack",3,"style"],[1,"row"],[3,"title"],[1,"door"],[1,"cell-wall",3,"click"],[1,"rack"],[1,"cell",3,"id","selected"],[1,"cell",3,"click","id"],[1,"form",3,"formGroup"],[1,"action"],[1,"help"],[1,"btn-error",3,"click"],[3,"type","formControl","placeholder","readOnly"],[1,"fa-light","fa-circle-info"],[3,"config"],[3,"click"],[1,"fa-solid","fa-plus"]],template:function(e,i){1&e&&(t.j41(0,"div",4)(1,"app-card",5),t.bIt("actionClicked",function(s){return i.actionCardClicked(s)}),t.j41(2,"div",6),t.DNE(3,Q,6,3)(4,Z,12,12),t.k0s(),t.j41(5,"div",7)(6,"div",8),t.Z7z(7,Y,6,8,"div",9,R),t.DNE(9,J,7,12,"div",10),t.k0s()()(),t.DNE(10,ct,28,13),t.k0s()),2&e&&(t.R7$(),t.Y8G("title","admin-feature-shelve-add.add-title")("actions",i.actions$().physical),t.R7$(2),t.vxM(3,i.errors$().length>0?3:i.stock.isEmpty?4:-1),t.R7$(2),t.Y8G("formGroup",i.formGroup),t.R7$(2),t.Dyx(i.formConfigs),t.R7$(2),t.vxM(9,i.stock.isEmpty?9:-1),t.R7$(),t.vxM(10,i.data$().rows.length||!i.stock.isEmpty?10:-1))},dependencies:[c.X1,c.me,c.BC,c.cb,c.l_,c.j4,u.h,u.D9,r.up,r.ib],styles:['.flexos[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.first-step[_ngcontent-%COMP%]{margin-bottom:30px}.table[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;width:100%;z-index:15;background:var(--theme-white);border:1px solid var(--theme-eee)}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{flex:1 0 auto;height:auto;border:.5px solid var(--theme-white)}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]:before{content:"";float:left;padding-top:100%}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{background:var(--theme-eee)}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .wall[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .wall-cell[_ngcontent-%COMP%]{border:.5px solid red}.first-step[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:20px}.first-step[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%], .first-step[_ngcontent-%COMP%]   .explanation[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column}.first-step[_ngcontent-%COMP%]   .explanation[_ngcontent-%COMP%]{flex:2;display:flex;flex-direction:column;gap:15px}.first-step[_ngcontent-%COMP%]   .explanation[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:10px}.first-step[_ngcontent-%COMP%]   .explanation[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1}.form[_ngcontent-%COMP%]{border-top:1px solid var(--theme-eee)}.form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:15px}.rack[_ngcontent-%COMP%]{position:absolute;display:flex;flex-direction:column;justify-content:center;align-items:center;border:1px solid var(--theme-eee)}.input[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;gap:15px;border:1px solid var(--theme-eee);border-top:none}.input[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1;padding:10px;border-right:1px solid var(--theme-eee);text-transform:uppercase;font-size:14px}.input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1}.disabled[_ngcontent-%COMP%]{background:var(--theme-white);border:1px solid var(--theme-aaa);color:var(--theme-aaa);cursor:default}.plan[_ngcontent-%COMP%]{position:relative;margin-bottom:30px;padding:30px;border:1px solid var(--theme-eee)}.plan[_ngcontent-%COMP%]   .left-wall[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:0;width:30px;display:flex;flex-direction:column}.plan[_ngcontent-%COMP%]   .right-wall[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;width:30px;display:flex;flex-direction:column}.plan[_ngcontent-%COMP%]   .top-wall[_ngcontent-%COMP%]{position:absolute;top:0;right:30px;left:30px;height:30px;display:flex;flex-direction:row}.plan[_ngcontent-%COMP%]   .bottom-wall[_ngcontent-%COMP%]{position:absolute;bottom:0;right:30px;left:30px;height:30px;display:flex;flex-direction:row}.plan[_ngcontent-%COMP%]   .cell-wall-square[_ngcontent-%COMP%]{width:30px;height:30px;background:var(--theme-standard-bg-hover)}.plan[_ngcontent-%COMP%]   .cell-wall[_ngcontent-%COMP%]{background:var(--theme-standard-bg-hover);flex:1}.plan[_ngcontent-%COMP%]   .wall-selected[_ngcontent-%COMP%]{background:var(--theme-white)}.plan[_ngcontent-%COMP%]   .wall-edition-mode[_ngcontent-%COMP%]   .cell-wall-square[_ngcontent-%COMP%], .plan[_ngcontent-%COMP%]   .wall-edition-mode[_ngcontent-%COMP%]   .cell-wall[_ngcontent-%COMP%]{border:.5px solid var(--theme-eee);background:var(--theme-white);cursor:pointer}.plan[_ngcontent-%COMP%]   .wall-edition-mode[_ngcontent-%COMP%]   .cell-wall-square[_ngcontent-%COMP%]:hover, .plan[_ngcontent-%COMP%]   .wall-edition-mode[_ngcontent-%COMP%]   .cell-wall[_ngcontent-%COMP%]:hover, .plan[_ngcontent-%COMP%]   .wall-edition-mode[_ngcontent-%COMP%]   .wall-selected[_ngcontent-%COMP%]{background:var(--theme-standard-bg-hover)}.plan[_ngcontent-%COMP%]   .door[_ngcontent-%COMP%]{position:absolute;display:flex;flex-direction:column;justify-content:center;align-items:center;background:var(--theme-white);z-index:50;border:1px solid var(--theme-eee)}.plan[_ngcontent-%COMP%]   .door-vertical[_ngcontent-%COMP%]{border-left:none;border-right:none}.plan[_ngcontent-%COMP%]   .door-horizontal[_ngcontent-%COMP%]{border-top:none;border-bottom:none}.action[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;gap:20px;margin-top:10px}.action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:240px}.edition-mode[_ngcontent-%COMP%]{border:.5px solid var(--theme-eee)}.edition-mode[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{border:.5px solid var(--theme-eee);cursor:pointer}.edition-mode[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]:hover{background:var(--theme-eee)}.band[_ngcontent-%COMP%]{background:var(--theme-standard-bg);margin:20px -18px;border-top:1px solid var(--theme-eee);border-bottom:1px solid var(--theme-eee);height:20px}.help[_ngcontent-%COMP%]{flex:3;display:flex;flex-direction:row;gap:10px}.help[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--theme-secondary);font-size:18px;margin-right:10px}.help[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:2}input[_ngcontent-%COMP%]{border:none}.actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:10px;justify-content:flex-end;align-items:flex-end}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:250px}.data[_ngcontent-%COMP%]{flex:2;display:flex;flex-direction:column;gap:10px;margin-bottom:25px}.data[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{text-transform:uppercase}.data[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--theme-error-dark)}@media (max-width: 600px){.first-step[_ngcontent-%COMP%]{display:flex;flex-direction:column}}@media (min-width: 300px) and (max-width: 600px){.actions[_ngcontent-%COMP%]{display:flex;flex-direction:column}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}']})}(0,C.Cg)([(0,r.ZD)({title:"common.cancel-form.confirm-title",message:"common.cancel-form.confirm-message"})],b.prototype,"cancel",null),(0,C.Cg)([(0,r.ZD)({title:"common.delete-form.confirm-title",message:"common.delete-form.confirm-message"})],b.prototype,"delete",null);var I=d(7136),w=d(7679);function dt(o,n){if(1&o&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&o){const e=n.$implicit;t.R7$(),t.SpI(" ",t.bMT(2,1,"admin-feature.product-form."+e.control+"."+e.error),"")}}function mt(o,n){if(1&o&&(t.j41(0,"div",1),t.Z7z(1,dt,3,3,"span",null,t.Vm6),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.Dyx(e.errors$())}}class x{constructor(){this.errors$=(0,t.vPA)([]),this.actions$=(0,t.EWP)(()=>this.getActions(this.product,this.errors$())),this.config$=(0,t.EWP)(()=>this.genFormConfigs(this.stockService.list$(),this.product)),this.router=(0,t.WQX)(_.Ix),this.productService=(0,t.WQX)(I.bk),this.productUtils=(0,t.WQX)(I.uo),this.stockUtils=(0,t.WQX)(a.FW),this.stockService=(0,t.WQX)(a.QJ),this.shelveUtils=(0,t.WQX)(a.O9),this.destroyRef=(0,t.WQX)(t.abz)}ngOnInit(){this.stockService.list()}setFormGroup(n){this.formGroup=n,(0,r.NC)(this.formGroup,this.errors$,this.destroyRef)}actionCardClicked(n){switch(n.action){case w.BA.SAVE:this.save();break;case w.BA.CANCEL:this.cancel();break;case w.BA.DELETE:this.delete()}}genFormConfigs(n,e){return this.productUtils.getDataFormConfig(e,this.stockUtils.toDTOS(n),this.shelveUtils.toDTO(this.shelveUtils.getEmpty()),!this.product.isEmpty,"feature.admin.product.title-add")}getActions(n,e){const i=[{icon:"fa-regular fa-floppy-disk",action:w.BA.SAVE,isDisabled:!1},{icon:"fa-regular fa-arrow-rotate-left",action:w.BA.CANCEL,isDisabled:!1}];return n.isEmpty||i.push({icon:"fa-regular fa-trash",action:w.BA.DELETE,isDisabled:!1}),i}save(){if(this.formGroup?.valid&&this.formGroup?.value){let n;n=this.product.isEmpty?this.productService.create(this.productUtils.genCreatePayload(this.formGroup?.value,this.stockUtils.toDTOS(this.stockService.list$()))):this.productService.update(this.productUtils.genUpdatePayload({...this.formGroup?.value,id:this.product.id},this.stockUtils.toDTOS(this.stockService.list$()))),n.pipe((0,v.M)(e=>{e.isEmpty||this.router.navigate([r.Sb.PRODUCT_LIST]).then()})).subscribe()}this.formGroup?.invalid&&this.errors$.set((0,r.lo)(this.formGroup))}cancel(){this.router.navigate([r.Sb.PRODUCT_LIST]).then()}delete(){this.router.navigate([r.Sb.ADMIN_PRODUCT]).then()}static#t=this.\u0275fac=function(e){return new(e||x)};static#e=this.\u0275cmp=t.VBU({type:x,selectors:[["app-product-admin-form"]],inputs:{product:"product"},standalone:!0,features:[t.aNF],decls:3,vars:5,consts:[[3,"actionClicked","title","params","actions"],[1,"error-card-pan"],[3,"formGroupSet","config"]],template:function(e,i){1&e&&(t.j41(0,"app-card",0),t.bIt("actionClicked",function(s){return i.actionCardClicked(s)}),t.DNE(1,mt,3,0,"div",1),t.j41(2,"app-form-builder",2),t.bIt("formGroupSet",function(s){return i.setFormGroup(s)}),t.k0s()()),2&e&&(t.Y8G("title",i.product.isEmpty?"admin-feature.title.product-add":"admin-feature.title.product-update")("params",i.product)("actions",i.actions$()),t.R7$(),t.vxM(1,i.errors$().length>0?1:-1),t.R7$(),t.Y8G("config",i.config$()))},dependencies:[r.ib,r.$l,u.h,u.D9]})}(0,C.Cg)([(0,r.ZD)({title:"common.cancel-form.confirm-title",message:"common.cancel-form.confirm-message"})],x.prototype,"cancel",null),(0,C.Cg)([(0,r.ZD)({title:"common.delete-form.confirm-title",message:"common.delete-form.confirm-message"})],x.prototype,"delete",null);let pt=(()=>{class o{constructor(){this.productUtils=(0,t.WQX)(P.u)}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-product-create-page"]],standalone:!0,features:[t.aNF],decls:1,vars:1,consts:[[3,"product"]],template:function(i,l){1&i&&t.nrm(0,"app-product-admin-form",0),2&i&&t.Y8G("product",l.productUtils.getEmpty())},dependencies:[x]})}return o})();function ht(o,n){if(1&o&&t.nrm(0,"app-product-admin-form",0),2&o){const e=t.XpG();t.Y8G("product",e.detail$())}}let ft=(()=>{class o{constructor(){this.productService=(0,t.WQX)(P.b),this.stockService=(0,t.WQX)(a.QJ),this.detail$=(0,t.vPA)(null)}ngOnInit(){this.productService.detail(this.id).pipe((0,v.M)(e=>this.detail$.set(e))).subscribe()}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-product-admin-update-page"]],inputs:{id:"id"},standalone:!0,features:[t.aNF],decls:1,vars:1,consts:[[3,"product"]],template:function(i,l){1&i&&t.DNE(0,ht,1,1,"app-product-admin-form",0),2&i&&t.vxM(0,l.detail$()?0:-1)},dependencies:[x]})}return o})();class E{constructor(){this.router=(0,t.WQX)(_.Ix),this.stockService=(0,t.WQX)(a.QJ),this.stockUtils=(0,t.WQX)(a.FW),this.config$=(0,t.EWP)(()=>this.genConfigs(this.stockService.list$()||void 0))}ngOnInit(){this.stockService.list()}addItem(){this.router.navigate([r.Sb.ADMIN_SHELVE_CREATE]).then()}onActionClicked(n){const e=n.data;switch(n.action){case a.jg.DETAIL:this.handleDetail(e.id);break;case a.jg.EDIT:this.handleEdit(e.id);break;case a.jg.DELETE:this.handleDelete(e.id)}}onRowClicked(n){console.log("onRowClicked",n)}genConfigs(n){return this.stockUtils.getDataTableConfig(n??[])}handleDetail(n){this.router.navigate([r.Sb.ADMIN_SHELVE_DETAIL.replace(":id",n)]).then()}handleEdit(n){this.router.navigate([r.Sb.ADMIN_SHELVE_UPDATE.replace(":id",n)]).then()}handleDelete(n){this.stockService.delete(n)}static#t=this.\u0275fac=function(e){return new(e||E)};static#e=this.\u0275cmp=t.VBU({type:E,selectors:[["app-shelve-management-page"]],standalone:!0,features:[t.aNF],decls:6,vars:4,consts:[[1,"actions"],[1,"btn",3,"click"],[1,"fa-solid","fa-plus"],[3,"actionClicked","rowClicked","config"]],template:function(e,i){1&e&&(t.j41(0,"div",0)(1,"div",1),t.bIt("click",function(){return i.addItem()}),t.nrm(2,"i",2),t.EFF(3),t.nI1(4,"translate"),t.k0s()(),t.j41(5,"app-data-table",3),t.bIt("actionClicked",function(s){return i.onActionClicked(s)})("rowClicked",function(s){return i.onRowClicked(s)}),t.k0s()),2&e&&(t.R7$(3),t.SpI(" ",t.bMT(4,2,"app.common.add-element"),""),t.R7$(2),t.Y8G("config",i.config$()))},dependencies:[r.up,u.h,u.D9],styles:[".actions[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:flex-end;align-items:flex-end;margin-bottom:20px}.actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{height:40px;display:flex;flex-direction:row;gap:8px;align-items:center;justify-content:center;padding:8px 16px;background:var(--theme-primary);color:var(--theme-white);border-radius:2px;cursor:pointer;transition:all ease .3s}.actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background:var(--theme-secondary);color:var(--theme-primary)}"]})}(0,C.Cg)([(0,r.ZD)({title:"common.delete-form.confirm-title",message:"common.delete-form.confirm-message"})],E.prototype,"handleDelete",null);let ut=(()=>{class o{constructor(){this.stockUtils=(0,t.WQX)(a.FW),this.stock=this.stockUtils.getEmpty()}ngOnInit(){}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-stock-admin-add-page"]],standalone:!0,features:[t.aNF],decls:1,vars:1,consts:[[3,"stock"]],template:function(i,l){1&i&&t.nrm(0,"app-shelve-admin-form",0),2&i&&t.Y8G("stock",l.stock)},dependencies:[b]})}return o})();function gt(o,n){if(1&o&&t.nrm(0,"app-shelve-admin-form",0),2&o){const e=t.XpG();t.Y8G("stock",e.detail$())}}let Ct=(()=>{class o{constructor(){this.stockService=(0,t.WQX)(a.QJ),this.detail$=(0,t.vPA)(null)}ngOnInit(){this.stockService.detail(this.id).pipe((0,v.M)(e=>this.detail$.set(e))).subscribe()}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-stock-admin-update-page"]],inputs:{id:"id"},standalone:!0,features:[t.aNF],decls:1,vars:1,consts:[[3,"stock"]],template:function(i,l){1&i&&t.DNE(0,gt,1,1,"app-shelve-admin-form",0),2&i&&t.vxM(0,l.detail$()?0:-1)},dependencies:[b]})}return o})();function _t(o,n){if(1&o&&t.nrm(0,"app-stock-detail",0),2&o){const e=t.XpG();t.Y8G("detail",e.detail$())}}let vt=(()=>{class o{constructor(){this.stockService=(0,t.WQX)(a.QJ),this.detail$=(0,t.vPA)(null)}ngOnInit(){this.stockService.detail(this.id).pipe((0,v.M)(e=>this.detail$.set(e))).subscribe()}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-stock-admin-detail-page"]],inputs:{id:"id"},standalone:!0,features:[t.aNF],decls:1,vars:1,consts:[[3,"detail"]],template:function(i,l){1&i&&t.DNE(0,_t,1,1,"app-stock-detail",0),2&i&&t.vxM(0,l.detail$()?0:-1)},dependencies:[a.r0]})}return o})()}}]);