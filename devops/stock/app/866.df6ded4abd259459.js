"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[866],{7461:(g,d,s)=>{s.d(d,{lm:()=>t,L7:()=>o,A2:()=>r});var t=function(a){return a.DETAIL="DETAIL",a.EDIT="EDIT",a.DELETE="DELETE",a.ADD="ADD",a.LOGOUT="LOGOUT",a}(t||{}),r=function(a){return a.USERNAME="username",a.PASSWORD="password",a.MAIL="mail",a.ISADMIN="isAdmin",a.FIRSTNAME="firstname",a.LASTNAME="lastname",a.SECTION="section",a}(r||{}),o=function(a){return a.TRUE="true",a.FALSE="false",a}(o||{})},1866:(g,d,s)=>{s.r(d),s.d(d,{ParameterPageComponent:()=>T});var t=s(4438),r=s(177),o=s(8994),a=s(3834),h=s(7461),c=s(6970);function m(e,u){if(1&e&&(t.j41(0,"div",2)(1,"div",3)(2,"div",4),t.EFF(3),t.nI1(4,"labelWithParam"),t.k0s(),t.j41(5,"div",5),t.EFF(6),t.k0s()(),t.j41(7,"div",3)(8,"div",4),t.EFF(9),t.nI1(10,"labelWithParam"),t.k0s(),t.j41(11,"div",5),t.EFF(12),t.k0s()(),t.j41(13,"div",3)(14,"div",4),t.EFF(15),t.nI1(16,"labelWithParam"),t.k0s(),t.j41(17,"div",5),t.EFF(18),t.k0s()(),t.j41(19,"div",3)(20,"div",4),t.EFF(21),t.nI1(22,"labelWithParam"),t.k0s(),t.j41(23,"div",5),t.EFF(24),t.nI1(25,"labelWithParam"),t.k0s()(),t.j41(26,"div",3)(27,"div",4),t.EFF(28),t.nI1(29,"labelWithParam"),t.k0s(),t.j41(30,"div",5),t.EFF(31),t.nI1(32,"labelWithParam"),t.k0s()()()),2&e){const i=u.ngIf;t.R7$(3),t.JRh(t.bMT(4,10,"security-feature.parameter-page.label.id")),t.R7$(3),t.JRh(i.id),t.R7$(3),t.JRh(t.bMT(10,12,"security-feature.parameter-page.label.username")),t.R7$(3),t.JRh(i.username),t.R7$(3),t.JRh(t.bMT(16,14,"security-feature.parameter-page.label.mail")),t.R7$(3),t.JRh(i.mail),t.R7$(3),t.JRh(t.bMT(22,16,"security-feature.parameter-page.label.firstname")),t.R7$(3),t.JRh(t.bMT(25,18,i.firstname?i.firstname:"security-feature.parameter-page.label.firstname-empty")),t.R7$(4),t.JRh(t.bMT(29,20,"security-feature.parameter-page.label.lastname")),t.R7$(3),t.JRh(t.bMT(32,22,i.lastname?i.lastname:"security-feature.parameter-page.label.firstname-empty"))}}let T=(()=>{class e{constructor(){this.router=(0,t.WQX)(c.Ix),this.securityService=(0,t.WQX)(o.i),this.actions$=(0,t.vPA)(this.getAction())}ngOnInit(){}actioncCliked(i){switch(i.action){case h.lm.LOGOUT:this.securityService.logOut();break;case h.lm.EDIT:this.router.navigate([a.Sb.ADMIN_MEMBER_UPDATE.replace(":id",i.data.id)]).then()}}getAction(){return[{icon:"fa-pencil",action:h.lm.EDIT,isDisabled:!1},{icon:"fa-arrow-up-left-from-circle",action:h.lm.LOGOUT,isDisabled:!1}]}static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-parameter-page"]],standalone:!0,features:[t.aNF],decls:2,vars:4,consts:[[3,"actionClicked","actions","title","params"],["class","table",4,"ngIf"],[1,"table"],[1,"row"],[1,"cell","cell-label"],[1,"cell","cell-value"]],template:function(n,f){1&n&&(t.j41(0,"app-card",0),t.bIt("actionClicked",function(l){return f.actioncCliked(l)}),t.DNE(1,m,33,24,"div",1),t.k0s()),2&n&&(t.Y8G("actions",f.actions$())("title","security-feature.parameter-page.title")("params",f.securityService.account$()),t.R7$(),t.Y8G("ngIf",f.securityService.account$()))},dependencies:[r.MD,r.bT,a.ib,a.Sd],styles:[".table[_ngcontent-%COMP%]{display:flex;flex-direction:column}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row;border-bottom:1px solid var(--theme-eee)}.table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.cell-label[_ngcontent-%COMP%]{width:200px;font-size:10px;text-transform:uppercase;color:var(--theme-primary);letter-spacing:1.3px;padding:10px 10px 10px 0}.cell-value[_ngcontent-%COMP%]{flex:2;color:var(--theme--input-text)}.button-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-end;align-items:flex-end;padding-top:30px}.button-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:250px}.band[_ngcontent-%COMP%]{background:var(--theme-standard-bg);margin:20px -18px;border-top:1px solid var(--theme-eee);border-bottom:1px solid var(--theme-eee);height:20px}"]})}return e})()},8016:(g,d,s)=>{s.d(d,{h:()=>c});var t=s(6748),r=s(7461),o=s(3834),a=s(9417),h=s(4438);let c=(()=>{class m{getEmpty(){return{facebookHash:"",googleHash:"",id:"",isAdmin:!1,isEmpty:!0,mail:"",str:"",username:"",firstname:"",lastname:"",section:t.wn.WOOD}}fromDTO(e){return{facebookHash:"",googleHash:"",id:e.credential_id,isAdmin:e.isAdmin,isEmpty:!1,mail:e.mail,str:`${e.username.substring(0,1).toUpperCase()}${e.username.substring(1,e.username.length)}`,username:e.username,section:e.section,firstname:e.firstname,lastname:e.lastname}}fromDTOS(e){return e.map(u=>this.fromDTO(u))}toDTO(e){return{facebookHash:e.facebookHash,googleHash:e.googleHash,credential_id:e.id,isAdmin:e.isAdmin,mail:e.mail,username:e.username,firstname:e.firstname,lastname:e.lastname,section:e.section}}getDataTableConfig(e,u){let i=[];return u&&(i.push({icon:"fa-solid fa-pencil",action:r.lm.EDIT}),i.push({icon:"fa-solid fa-trash",action:r.lm.DELETE})),{translateKey:"admin-feature-member.table.label.",data:e,cellDefinitions:[{targetData:r.A2.USERNAME,minimalWidthVisibility:o.s5.SMALL,isMinimalWidth:!1},{targetData:r.A2.MAIL,minimalWidthVisibility:o.s5.MEDIUM,isMinimalWidth:!1},{targetData:r.A2.ISADMIN,minimalWidthVisibility:o.s5.MEDIUM,isMinimalWidth:!1},{targetData:"",actions:i,minimalWidthVisibility:o.s5.SMALL,isMinimalWidth:!0}]}}getDataFormConfig(e,u){const i=Object.values(r.A2),n=i.map(p=>{let l=[];switch(p){case r.A2.USERNAME:case r.A2.PASSWORD:l.push(a.k0.required,a.k0.minLength(3));break;case r.A2.MAIL:l.push(a.k0.required,a.k0.email);break;case r.A2.FIRSTNAME:case r.A2.LASTNAME:l.push(a.k0.required,a.k0.minLength(2));break;case r.A2.ISADMIN:case r.A2.SECTION:l.push(a.k0.required)}return{field:p,validators:l}}),f=i.map(p=>{let l="text",v=[];return p===r.A2.SECTION?(l="select",v=Object.values(t.wn).map(E=>({selected:e.section===E,value:E,label:`app.common.section.${E.toLowerCase()}`}))):p===r.A2.ISADMIN&&(l="select",v=Object.values(r.L7).map(E=>({selected:e.isAdmin===this.stringToBoolean(E),value:E,label:`feature.member.isAdmin.${E.toLowerCase()}`}))),{field:p,type:l,options:v}});return{submitTitle:u,translateKey:"feature.credential.form.label.",data:e,fields:i,validators:n,fieldTypes:f}}genCreatePayload(e){return{username:e.username,password:e.password,mail:e.mail,isAdmin:e.isAdmin,section:e.section,firstname:e.firstname,lastname:e.lastname}}genUpdatePayload(e){return{...this.genCreatePayload(e),credential_id:e.id}}stringToBoolean(e){return"true"===e.toLowerCase()}static#t=this.\u0275fac=function(u){return new(u||m)};static#e=this.\u0275prov=h.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})()},8994:(g,d,s)=>{s.d(d,{i:()=>T});var t=s(4438),r=s(8141),o=s(6354),a=s(5323),h=s(6970),c=s(3834),m=s(8016);let T=(()=>{class e{constructor(){this.api=(0,t.WQX)(a.Gf),this.tokenService=(0,t.WQX)(a.By),this.isAuthenticated$=(0,t.EWP)(()=>!this.tokenService.token$().isEmpty),this.credentialUtil=(0,t.WQX)(m.h),this.account$=(0,t.vPA)(this.credentialUtil.getEmpty()),this.isAuthenticatedHandler=(0,t.QZP)(()=>this.handleAuthenticatedChange(this.isAuthenticated$())),this.router=(0,t.WQX)(h.Ix),this.list$=(0,t.vPA)([])}signIn(i){return this.api.post(a.XI.SIGN_IN,{...i,socialLogin:!1}).pipe((0,r.M)(n=>{n.result&&this.tokenService.setToken({...n.data,isEmpty:!1})}))}signUp(i){return this.api.post(a.XI.SIGN_UP,{...i,socialLogin:!1}).pipe((0,r.M)(n=>{n.result&&this.router.navigate([c.Av.REDIRECT_TO_PUBLIC]).then()}))}create(i){return this.api.post(a.XI.MEMBER_CREATE,i,!0).pipe((0,r.M)(n=>{n.result&&this.router.navigate([c.Av.REDIRECT_TO_MEMBER_LIST]).then()}),(0,o.T)(n=>n.result?this.credentialUtil.fromDTO(n.data):this.credentialUtil.getEmpty()))}update(i){return this.api.put(a.XI.MEMBER_UPDATE,i,!0).pipe((0,r.M)(n=>{n.result&&this.router.navigate([c.Av.REDIRECT_TO_MEMBER_LIST]).then()}),(0,o.T)(n=>n.result?this.credentialUtil.fromDTO(n.data):this.credentialUtil.getEmpty()))}logOut(){this.tokenService.setToken({token:"",refreshToken:"",isEmpty:!0})}handleAuthenticatedChange(i){this.api.get(a.XI.ME).pipe((0,r.M)(n=>{n.result?(this.account$.set(this.credentialUtil.fromDTO(n.data)),window.location.pathname.startsWith("/"+c.Av.REDIRECT_TO_AUTHENTICATED)||this.router.navigate([c.Av.REDIRECT_TO_AUTHENTICATED]).then()):this.router.navigate([c.Av.REDIRECT_TO_PUBLIC]).then()})).subscribe()}list(){this.api.get(a.XI.CREDENTIAL_LIST).pipe((0,r.M)(i=>{this.list$.set(i.result?this.credentialUtil.fromDTOS(i.data):[])})).subscribe()}detail(i){return this.api.get(`${a.XI.MEMBER_DETAIL}${i}`).pipe((0,o.T)(n=>n.result?this.credentialUtil.fromDTO(n.data):this.credentialUtil.getEmpty()))}delete(i){this.api.delete(`${a.XI.MEMBER_DELETE}${i}`,!0).pipe((0,r.M)(n=>{n.result&&this.list()})).subscribe()}static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})()}}]);